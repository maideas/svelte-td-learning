var app=function(t){"use strict";function e(){}function n(t,e){for(const n in e)t[n]=e[n];return t}function l(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(l)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function c(t){return null==t?"":t}function u(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function g(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function $(){return h(" ")}function y(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function b(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}}function S(t,e,n){t.classList[n?"add":"remove"](e)}let A;function k(t){A=t}function R(t){(function(){if(!A)throw new Error("Function called outside component initialization");return A})().$$.on_mount.push(t)}const E=[],Q=[],V=[],T=[],_=Promise.resolve();let z=!1;function I(t){V.push(t)}function P(t){T.push(t)}let Y=!1;const M=new Set;function B(){if(!Y){Y=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];k(e),L(e.$$)}for(k(null),E.length=0;Q.length;)Q.pop()();for(let t=0;t<V.length;t+=1){const e=V[t];M.has(e)||(M.add(e),e())}V.length=0}while(E.length);for(;T.length;)T.pop()();z=!1,Y=!1,M.clear()}}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(I)}}const X=new Set;let F;function C(){F={r:0,c:[],p:F}}function G(){F.r||o(F.c),F=F.p}function O(t,e){t&&t.i&&(X.delete(t),t.i(e))}function N(t,e,n,l){if(t&&t.o){if(X.has(t))return;X.add(t),F.c.push((()=>{X.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}}function j(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function q(t){t&&t.c()}function H(t,e,n){const{fragment:r,on_mount:s,on_destroy:i,after_update:c}=t.$$;r&&r.m(e,n),I((()=>{const e=s.map(l).filter(a);i?i.push(...e):o(e),t.$$.on_mount=[]})),c.forEach(I)}function D(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(E.push(t),z||(z=!0,_.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(t,n,l,a,s,i,c=[-1]){const u=A;k(t);const d=n.props||{},g=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let m=!1;if(g.ctx=l?l(t,d,((e,n,...l)=>{const r=l.length?l[0]:n;return g.ctx&&s(g.ctx[e],g.ctx[e]=r)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](r),m&&J(t,e)),n})):[],g.update(),m=!0,o(g.before_update),g.fragment=!!a&&a(g.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);g.fragment&&g.fragment.l(t),t.forEach(f)}else g.fragment&&g.fragment.c();n.intro&&O(t.$$.fragment),H(t,n.target,n.anchor),B()}k(u)}class U{$destroy(){D(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function W(t){let n,l,r;return{c(){n=p("svg"),l=p("path"),x(l,"fill","currentColor"),x(l,"d",t[0]),x(n,"aria-hidden","true"),x(n,"class",r=c(t[1])+" svelte-1d15yci"),x(n,"role","img"),x(n,"xmlns","http://www.w3.org/2000/svg"),x(n,"viewBox",t[2])},m(t,e){d(t,n,e),u(n,l)},p(t,[e]){1&e&&x(l,"d",t[0]),2&e&&r!==(r=c(t[1])+" svelte-1d15yci")&&x(n,"class",r),4&e&&x(n,"viewBox",t[2])},i:e,o:e,d(t){t&&f(n)}}}function Z(t,e,l){let{icon:r}=e,o=[],a="",s="";return t.$$set=t=>{l(4,e=n(n({},e),i(t))),"icon"in t&&l(3,r=t.icon)},t.$$.update=()=>{8&t.$$.dirty&&l(2,s="0 0 "+r.icon[0]+" "+r.icon[1]),l(1,a="fa-svelte "+(e.class?e.class:"")),8&t.$$.dirty&&l(0,o=r.icon[4])},e=i(e),[o,a,s,r]}class tt extends U{constructor(t){super(),K(this,t,Z,W,s,{icon:3})}}
/*!
     * Font Awesome Free 5.15.1 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     */var et={prefix:"far",iconName:"arrow-alt-circle-up",icon:[512,512,[],"f35b","M256 504c137 0 248-111 248-248S393 8 256 8 8 119 8 256s111 248 248 248zm0-448c110.5 0 200 89.5 200 200s-89.5 200-200 200S56 366.5 56 256 145.5 56 256 56zm20 328h-40c-6.6 0-12-5.4-12-12V256h-67c-10.7 0-16-12.9-8.5-20.5l99-99c4.7-4.7 12.3-4.7 17 0l99 99c7.6 7.6 2.2 20.5-8.5 20.5h-67v116c0 6.6-5.4 12-12 12z"]};function nt(t){let e,n,l=t[2].toFixed()+"";return{c(){e=m("span"),n=h(l),x(e,"class","svelte-6n71zn")},m(t,l){d(t,e,l),u(e,n)},p(t,e){4&e&&l!==(l=t[2].toFixed()+"")&&v(n,l)},d(t){t&&f(e)}}}function lt(t){let e,n,l=t[2].toFixed(1)+"";return{c(){e=m("span"),n=h(l),x(e,"class","svelte-6n71zn")},m(t,l){d(t,e,l),u(e,n)},p(t,e){4&e&&l!==(l=t[2].toFixed(1)+"")&&v(n,l)},d(t){t&&f(e)}}}function rt(t){let e,n,l;return n=new tt({props:{icon:et}}),{c(){e=m("div"),q(n.$$.fragment),w(e,"font-size","32px"),w(e,"transform","rotate("+t[4]+"deg)"),x(e,"class","svelte-6n71zn")},m(t,r){d(t,e,r),H(n,e,null),l=!0},p(t,n){(!l||16&n)&&w(e,"transform","rotate("+t[4]+"deg)")},i(t){l||(O(n.$$.fragment,t),l=!0)},o(t){N(n.$$.fragment,t),l=!1},d(t){t&&f(e),D(n)}}}function ot(t){let n;return{c(){n=h("terminal state")},m(t,e){d(t,n,e)},p:e,i:e,o:e,d(t){t&&f(n)}}}function at(t){let n;return{c(){n=h("blocked")},m(t,e){d(t,n,e)},p:e,i:e,o:e,d(t){t&&f(n)}}}function st(t){let e,n,l,r,o,a,s,i,c,g,p,y,w,b,A,k,R,E,Q,V,T,_,z,I,P,Y,M,B,L,X,F=t[3][it.up].toFixed(3)+"",j=t[3][it.left].toFixed(3)+"",q=t[3][it.right].toFixed(3)+"",H=t[3][it.down].toFixed(3)+"";function D(t,e){return(null==c||4&e)&&(c=!!(Math.abs(t[2])<10)),c?lt:nt}let J=D(t,-1),K=J(t);const U=[at,ot,rt],W=[];function Z(t,e){return t[0]?0:t[1]?1:2}return k=Z(t),R=W[k]=U[k](t),{c(){e=m("div"),n=m("div"),l=$(),r=m("div"),o=m("span"),a=h(F),s=$(),i=m("div"),K.c(),g=$(),p=m("div"),y=m("span"),w=h(j),b=$(),A=m("div"),R.c(),E=$(),Q=m("div"),V=m("span"),T=h(q),_=$(),z=m("div"),I=$(),P=m("div"),Y=m("span"),M=h(H),B=$(),L=m("div"),x(o,"class","svelte-6n71zn"),x(r,"class","sub-tile sub-tile-top svelte-6n71zn"),x(i,"class","sub-tile sub-tile-reward svelte-6n71zn"),S(i,"reward-is-negative",t[2]<0),x(y,"class","svelte-6n71zn"),x(p,"class","sub-tile sub-tile-left svelte-6n71zn"),x(A,"class","sub-tile sub-tile-middle svelte-6n71zn"),x(V,"class","svelte-6n71zn"),x(Q,"class","sub-tile sub-tile-right svelte-6n71zn"),x(Y,"class","svelte-6n71zn"),x(P,"class","sub-tile sub-tile-bottom svelte-6n71zn"),x(e,"class","tile svelte-6n71zn"),x(e,"style",t[5]),S(e,"blocked",t[0]),S(e,"terminal",t[1])},m(t,c){d(t,e,c),u(e,n),u(e,l),u(e,r),u(r,o),u(o,a),u(e,s),u(e,i),K.m(i,null),u(e,g),u(e,p),u(p,y),u(y,w),u(e,b),u(e,A),W[k].m(A,null),u(e,E),u(e,Q),u(Q,V),u(V,T),u(e,_),u(e,z),u(e,I),u(e,P),u(P,Y),u(Y,M),u(e,B),u(e,L),X=!0},p(t,[n]){(!X||8&n)&&F!==(F=t[3][it.up].toFixed(3)+"")&&v(a,F),J===(J=D(t,n))&&K?K.p(t,n):(K.d(1),K=J(t),K&&(K.c(),K.m(i,null))),4&n&&S(i,"reward-is-negative",t[2]<0),(!X||8&n)&&j!==(j=t[3][it.left].toFixed(3)+"")&&v(w,j);let l=k;k=Z(t),k===l?W[k].p(t,n):(C(),N(W[l],1,1,(()=>{W[l]=null})),G(),R=W[k],R?R.p(t,n):(R=W[k]=U[k](t),R.c()),O(R,1),R.m(A,null)),(!X||8&n)&&q!==(q=t[3][it.right].toFixed(3)+"")&&v(T,q),(!X||8&n)&&H!==(H=t[3][it.down].toFixed(3)+"")&&v(M,H),(!X||32&n)&&x(e,"style",t[5]),1&n&&S(e,"blocked",t[0]),2&n&&S(e,"terminal",t[1])},i(t){X||(O(R),X=!0)},o(t){N(R),X=!1},d(t){t&&f(e),K.d(),W[k].d()}}}const it=Object.freeze({up:0,right:1,down:2,left:3});function ct(t,e,n){let l,r,o,a,s=!1,i=!1,c=0,u="";const d=()=>{r=Math.max(...l),o=l.indexOf(r),n(4,a=(90*o).toFixed())},f=()=>{n(3,l=Array(4).fill().map((()=>Math.random()))),d()};return f(),[s,i,c,l,a,u,()=>s,()=>{n(0,s=!0)},()=>i,()=>{n(1,i=!0)},()=>c,t=>{n(2,c=t)},()=>o,t=>i?c:l[t],()=>i?c:r,(t,e)=>{n(3,l[t]=e,l),d()},f,t=>{let e,l,r,o=.35+.6*t;s||(e=0+255*o,l=110+145*o,r=210+45*o,n(5,u="background: rgb("+e+","+l+","+r+", 1);"))}]}class ut extends U{constructor(t){super(),K(this,t,ct,st,s,{isBlocked:6,setBlocked:7,isTerminal:8,setTerminal:9,getReward:10,setReward:11,getPolicy:12,getQValue:13,getMaxQValue:14,setQValue:15,initQValues:16,setHeat:17})}get isBlocked(){return this.$$.ctx[6]}get setBlocked(){return this.$$.ctx[7]}get isTerminal(){return this.$$.ctx[8]}get setTerminal(){return this.$$.ctx[9]}get getReward(){return this.$$.ctx[10]}get setReward(){return this.$$.ctx[11]}get getPolicy(){return this.$$.ctx[12]}get getQValue(){return this.$$.ctx[13]}get getMaxQValue(){return this.$$.ctx[14]}get setQValue(){return this.$$.ctx[15]}get initQValues(){return this.$$.ctx[16]}get setHeat(){return this.$$.ctx[17]}}function dt(t,e,n){const l=t.slice();return l[21]=e[n],l[22]=e,l[23]=n,l}function ft(t,e,n){const l=t.slice();return l[21]=e[n],l[24]=e,l[25]=n,l}function gt(t){let e,n,l=t[25],r=t[23];const o=()=>t[18](e,l,r),a=()=>t[18](null,l,r);return e=new ut({props:{}}),o(),{c(){q(e.$$.fragment)},m(t,l){H(e,t,l),n=!0},p(t,n){l===t[25]&&r===t[23]||(a(),l=t[25],r=t[23],o());e.$set({})},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){N(e.$$.fragment,t),n=!1},d(t){a(),D(e,t)}}}function mt(t){let e,n,l=Array(t[0]),r=[];for(let e=0;e<l.length;e+=1)r[e]=gt(ft(t,l,e));const o=t=>N(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=h("")},m(t,l){for(let e=0;e<r.length;e+=1)r[e].m(t,l);d(t,e,l),n=!0},p(t,n){if(5&n){let a;for(l=Array(t[0]),a=0;a<l.length;a+=1){const o=ft(t,l,a);r[a]?(r[a].p(o,n),O(r[a],1)):(r[a]=gt(o),r[a].c(),O(r[a],1),r[a].m(e.parentNode,e))}for(C(),a=l.length;a<r.length;a+=1)o(a);G()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)O(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)N(r[t]);n=!1},d(t){g(r,t),t&&f(e)}}}function pt(t){let e,n,l=Array(t[1]),r=[];for(let e=0;e<l.length;e+=1)r[e]=mt(dt(t,l,e));const o=t=>N(r[t],1,1,(()=>{r[t]=null}));return{c(){e=m("div");for(let t=0;t<r.length;t+=1)r[t].c();x(e,"class","maze svelte-csffwp"),w(e,"grid-template-columns","repeat("+t[0]+", 100px)")},m(t,l){d(t,e,l);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[a]){if(7&a){let n;for(l=Array(t[1]),n=0;n<l.length;n+=1){const o=dt(t,l,n);r[n]?(r[n].p(o,a),O(r[n],1)):(r[n]=mt(o),r[n].c(),O(r[n],1),r[n].m(e,null))}for(C(),n=l.length;n<r.length;n+=1)o(n);G()}(!n||1&a)&&w(e,"grid-template-columns","repeat("+t[0]+", 100px)")},i(t){if(!n){for(let t=0;t<l.length;t+=1)O(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)N(r[t]);n=!1},d(t){t&&f(e),g(r,t)}}}function ht(t,e,n){let{numX:l}=e,{numY:r}=e,{blocked:o=[]}=e,{terminal:a=[]}=e,{rewards:s=[]}=e,{defaultReward:i=0}=e,c=Array.from({length:l},(()=>Array.from({length:r},(()=>null))));R((()=>{o.forEach((t=>{c[t[0]][t[1]].setBlocked()})),a.forEach((t=>{c[t[0]][t[1]].setTerminal()}));for(let t=0;t<r;t++)for(let e=0;e<l;e++)c[e][t].setReward(i);s.forEach((t=>{c[t[0]][t[1]].setReward(t[2])})),g()}));const u=t=>Math.floor(Math.random()*Math.floor(t)),d=t=>c[t[0]][t[1]].isBlocked(),f=t=>c[t[0]][t[1]].isTerminal(),g=()=>{for(let t=0;t<r;t++)for(let e=0;e<l;e++)c[e][t].initQValues();h()},m=t=>c[t[0]][t[1]].getPolicy(),p=t=>t[0]>=0&&t[0]<l&&t[1]>=0&&t[1]<r?c[t[0]][t[1]].getReward():(console.log("ERROR: Invalid getReward coordinates [",t[0],":",t[1],"] !"),0),h=()=>{let t=1e6,e=-1e6;for(let n=0;n<r;n++)for(let r=0;r<l;r++){let l=c[r][n].getMaxQValue();t>l&&(t=l),e<l&&(e=l)}let n=e-t;for(let e=0;e<r;e++)for(let r=0;r<l;r++){let l=c[r][e].getMaxQValue();c[r][e].setHeat((l-t)/n)}};return t.$$set=t=>{"numX"in t&&n(0,l=t.numX),"numY"in t&&n(1,r=t.numY),"blocked"in t&&n(3,o=t.blocked),"terminal"in t&&n(4,a=t.terminal),"rewards"in t&&n(5,s=t.rewards),"defaultReward"in t&&n(6,i=t.defaultReward)},[l,r,c,o,a,s,i,u,d,f,g,(t,e,n)=>{t[0]>=0&&t[0]<l&&t[1]>=0&&t[1]<r?(c[t[0]][t[1]].setQValue(e,n),h()):console.log("ERROR: Invalid setQValue coordinates [",t[0],":",t[1],"] !")},(t,e)=>c[t[0]][t[1]].getQValue(e),t=>c[t[0]][t[1]].getMaxQValue(),m,()=>{for(;;){let t=[u(l),u(r)];if(!f(t)&&!d(t))return t}},(t,e)=>Math.random()<e?u(4):m(t),(t,e)=>{let n=[...t];return e==it.down&&t[1]<r-1&&(n[1]+=1),e==it.right&&t[0]<l-1&&(n[0]+=1),e==it.up&&t[1]>0&&(n[1]-=1),e==it.left&&t[0]>0&&(n[0]-=1),d(n)&&(n=[...t]),[n,p(n)]},function(t,e,l){Q[t?"unshift":"push"]((()=>{c[e][l]=t,n(2,c)}))}]}class $t extends U{constructor(t){super(),K(this,t,ht,pt,s,{numX:0,numY:1,blocked:3,terminal:4,rewards:5,defaultReward:6,getRandomInt:7,isBlocked:8,isTerminal:9,initQValues:10,setQValue:11,getQValue:12,getMaxQValue:13,getPolicy:14,getRandomStartState:15,getEpsilonGreedyAction:16,step:17})}get getRandomInt(){return this.$$.ctx[7]}get isBlocked(){return this.$$.ctx[8]}get isTerminal(){return this.$$.ctx[9]}get initQValues(){return this.$$.ctx[10]}get setQValue(){return this.$$.ctx[11]}get getQValue(){return this.$$.ctx[12]}get getMaxQValue(){return this.$$.ctx[13]}get getPolicy(){return this.$$.ctx[14]}get getRandomStartState(){return this.$$.ctx[15]}get getEpsilonGreedyAction(){return this.$$.ctx[16]}get step(){return this.$$.ctx[17]}}function yt(t){let n;return{c(){n=m("div"),x(n,"class","plot svelte-1qi4jkb")},m(e,l){d(e,n,l),t[12](n)},p:e,i:e,o:e,d(e){e&&f(n),t[12](null)}}}function xt(t,e,n){let l,{title:r=""}=e,{xIsLog:o=!1}=e,{data:a=[]}=e,{yIsLog:s=!1}=e,{yTitle:i=""}=e,{hasSecondY:c=!1}=e,{dataSecond:u=[]}=e,{ySecondIsLog:d=!1}=e,{ySecondTitle:f=""}=e;const g=()=>{let t={title:r,showlegend:!1,xaxis:{type:o?"log":"linear",autorange:!0},yaxis:{title:i,type:s?"log":"linear",titlefont:{color:"#08C"},tickfont:{color:"#08C"},autorange:!0},margin:{autoexpand:!1,t:50,l:40,b:30,r:20}};""!=i&&(t.margin.l=60);let e=[{x:[...Array(a.length).keys()],y:a,mode:"lines",line:{shape:"spline"},type:"scatter"}];if(c){t.yaxis2={title:f,type:d?"log":"linear",overlaying:"y",side:"right",titlefont:{color:"#E60"},tickfont:{color:"#E60"},autorange:!0},t.margin.r=""!=f?60:40;let n={x:[...Array(u.length).keys()],y:u,mode:"lines",line:{shape:"spline"},type:"scatter",yaxis:"y2"};e.push(n)}Plotly.react(l,e,t,{displaylogo:!1})};return R((()=>{g()})),t.$$set=t=>{"title"in t&&n(3,r=t.title),"xIsLog"in t&&n(4,o=t.xIsLog),"data"in t&&n(1,a=t.data),"yIsLog"in t&&n(5,s=t.yIsLog),"yTitle"in t&&n(6,i=t.yTitle),"hasSecondY"in t&&n(7,c=t.hasSecondY),"dataSecond"in t&&n(2,u=t.dataSecond),"ySecondIsLog"in t&&n(8,d=t.ySecondIsLog),"ySecondTitle"in t&&n(9,f=t.ySecondTitle)},[l,a,u,r,o,s,i,c,d,f,g,()=>{n(1,a=[]),n(2,u=[]),g()},function(t){Q[t?"unshift":"push"]((()=>{l=t,n(0,l)}))}]}class vt extends U{constructor(t){super(),K(this,t,xt,yt,s,{title:3,xIsLog:4,data:1,yIsLog:5,yTitle:6,hasSecondY:7,dataSecond:2,ySecondIsLog:8,ySecondTitle:9,updatePlot:10,clearPlot:11})}get updatePlot(){return this.$$.ctx[10]}get clearPlot(){return this.$$.ctx[11]}}function wt(t,e,n){const l=t.slice();return l[47]=e[n],l}function bt(t){let n,l,r,o=t[47].name+"";return{c(){n=m("option"),l=h(o),n.__value=r=t[47].name,n.value=n.__value},m(t,e){d(t,n,e),u(n,l)},p:e,d(t){t&&f(n)}}}function St(t){let e,n,l,r,a,s,i,c,p,S,A,k,R,E,V,T,_,z,Y,M,B,L,X,F;function C(e){t[20].call(null,e)}function G(e){t[21].call(null,e)}let J={yTitle:"reward per episode",ySecondTitle:"steps per episode",hasSecondY:!1};void 0!==t[9]&&(J.data=t[9]),void 0!==t[8]&&(J.dataSecond=t[8]),l=new vt({props:J}),t[19](l),Q.push((()=>j(l,"data",C))),Q.push((()=>j(l,"dataSecond",G)));let K=t[12],U=[];for(let e=0;e<K.length;e+=1)U[e]=bt(wt(t,K,e));let W={numX:t[4],numY:t[5],blocked:t[0],terminal:t[1],rewards:t[2],defaultReward:t[3]};return B=new $t({props:W}),t[23](B),{c(){e=m("div"),n=m("div"),q(l.$$.fragment),s=$(),i=m("div"),c=h("EPISODE : "),p=h(t[11]),S=$(),A=m("div"),k=m("select");for(let t=0;t<U.length;t+=1)U[t].c();R=$(),E=m("button"),E.textContent="init",V=$(),T=m("button"),T.textContent="halt",_=$(),z=m("button"),z.textContent="run",Y=$(),M=m("div"),q(B.$$.fragment),x(n,"class","narrow-box svelte-17vfyc3"),x(i,"class","box svelte-17vfyc3"),x(k,"class","svelte-17vfyc3"),void 0===t[10]&&I((()=>t[22].call(k))),x(E,"class","svelte-17vfyc3"),x(T,"class","svelte-17vfyc3"),x(z,"class","svelte-17vfyc3"),x(A,"class","box svelte-17vfyc3"),x(M,"class","narrow-box svelte-17vfyc3"),x(e,"class","container svelte-17vfyc3"),w(e,"width",16+100*t[4]+4*(t[4]-1)+"px")},m(r,o){d(r,e,o),u(e,n),H(l,n,null),u(e,s),u(e,i),u(i,c),u(i,p),u(e,S),u(e,A),u(A,k);for(let t=0;t<U.length;t+=1)U[t].m(k,null);b(k,t[10]),u(A,R),u(A,E),u(A,V),u(A,T),u(A,_),u(A,z),u(e,Y),u(e,M),H(B,M,null),L=!0,X||(F=[y(k,"change",t[22]),y(k,"change",t[15]),y(E,"click",t[15]),y(T,"click",t[14]),y(z,"click",t[13])],X=!0)},p(t,n){const o={};if(!r&&512&n[0]&&(r=!0,o.data=t[9],P((()=>r=!1))),!a&&256&n[0]&&(a=!0,o.dataSecond=t[8],P((()=>a=!1))),l.$set(o),(!L||2048&n[0])&&v(p,t[11]),4096&n[0]){let e;for(K=t[12],e=0;e<K.length;e+=1){const l=wt(t,K,e);U[e]?U[e].p(l,n):(U[e]=bt(l),U[e].c(),U[e].m(k,null))}for(;e<U.length;e+=1)U[e].d(1);U.length=K.length}5120&n[0]&&b(k,t[10]);const s={};16&n[0]&&(s.numX=t[4]),32&n[0]&&(s.numY=t[5]),1&n[0]&&(s.blocked=t[0]),2&n[0]&&(s.terminal=t[1]),4&n[0]&&(s.rewards=t[2]),8&n[0]&&(s.defaultReward=t[3]),B.$set(s),(!L||16&n[0])&&w(e,"width",16+100*t[4]+4*(t[4]-1)+"px")},i(t){L||(O(l.$$.fragment,t),O(B.$$.fragment,t),L=!0)},o(t){N(l.$$.fragment,t),N(B.$$.fragment,t),L=!1},d(n){n&&f(e),t[19](null),D(l),g(U,n),t[23](null),D(B),X=!1,o(F)}}}const At=.1,kt=.2,Rt=.9;function Et(t,e,n){let l,r,o,a,s,{blocked:i=[]}=e,{terminal:c=Array([0,0])}=e,{rewards:u=Array([0,0,1])}=e,{defaultReward:d=0}=e,{startState:f}=e,{numEpisodes:g=1e3}=e,{planningSteps:m=10}=e,{numX:p=5}=e,{numY:h=5}=e,$=[],y=[],x=0,v=0,w=0;const b=(t,e,n,r)=>{let o;o=l.isTerminal(r)?n:n+Rt*l.getMaxQValue(r);let a=.8*l.getQValue(t,e)+kt*o;l.setQValue(t,e,a)},S=t=>{let e,n,o;l.isTerminal(t)?($.push(w),y.push(x),r.updatePlot(),P()):s=setTimeout((()=>{n=l.getEpsilonGreedyAction(t,At),[e,o]=l.step(t,n),b(t,n,o,e),t=[...e],x+=o,w++,S(t)}),0)},A=(t,e)=>{let n,o,a;l.isTerminal(t)?($.push(w),y.push(x),r.updatePlot(),P()):s=setTimeout((()=>{[n,a]=l.step(t,e),o=l.getEpsilonGreedyAction(n,At),((t,e,n,r,o)=>{let a;a=l.isTerminal(r)?n:n+Rt*l.getQValue(r,o);let s=.8*l.getQValue(t,e)+kt*a;l.setQValue(t,e,s)})(t,e,a,n,o),t=[...n],e=Number(o),x+=a,w++,A(t,e)}),0)},k=(t,e)=>{let n,o,a;l.isTerminal(t)?($.push(w),y.push(x),r.updatePlot(),P()):s=setTimeout((()=>{[n,a]=l.step(t,e),o=l.getEpsilonGreedyAction(n,At),((t,e,n,r,o)=>{let a;if(l.isTerminal(r))a=n;else{let t,e=0;t=.025;for(let n=0;n<4;n++)e+=t*l.getQValue(r,n);t=.9;let o=l.getPolicy(r);e+=t*l.getQValue(r,o),a=n+Rt*e}let s=.8*l.getQValue(t,e)+kt*a;l.setQValue(t,e,s)})(t,e,a,n),t=[...n],e=Number(o),x+=a,w++,k(t,e)}),0)};let R=Array.from({length:p},(()=>Array.from({length:h},(()=>Array.from({length:4},(()=>null)))))),E=[];const V=()=>{let t=l.getRandomInt(E.length);return E[t]},T=t=>{let e,n,o;l.isTerminal(t)?($.push(w),y.push(x),r.updatePlot(),P()):s=setTimeout((()=>{n=l.getEpsilonGreedyAction(t,At),[e,o]=l.step(t,n),b(t,n,o,e),((t,e,n,l)=>{let r=t[0],o=t[1],a=!1;for(let t=0;t<E.length;t++)if(E[t][0]==r&&E[t][1]==o&&E[t][2]==e){a=!0;break}a||E.push([t,e]),R[r][o][e]=[l,n]})(t,n,o,e),t=[...e];for(let t=0;t<m;t++){let t,e,n,l;[t,e]=V(),[l,n]=R[t[0]][t[1]][e],b(t,e,n,l)}x+=o,w++,T(t)}),0)};let _;const z=t=>{let e,n,o;l.isTerminal(t)?((()=>{for(let t=0;t<h;t++)for(let e=0;e<p;e++)for(let n=0;n<4;n++){let r=!1,o=0,a=1;for(let l=0;l<_.length;l++)e==_[l][0][0]&&t==_[l][0][1]&&n==_[l][1]&&(r=!0),r&&(o+=a*_[l][2],a*=Rt);if(r){let r=.8*l.getQValue([e,t],n)+kt*o;l.setQValue([e,t],n,r)}}})(),$.push(w),y.push(x),r.updatePlot(),P()):s=setTimeout((()=>{n=l.getEpsilonGreedyAction(t,At),[e,o]=l.step(t,n),_.push([t,n,o]),t=[...e],x+=o,w++,z(t)}),0)},I=[{name:"Q-Learning",func:()=>{let t;x=0,w=0,t=f||l.getRandomStartState(),S(t)}},{name:"SARSA",func:()=>{let t,e;x=0,w=0,t=f||l.getRandomStartState(),e=l.getEpsilonGreedyAction(t,At),A(t,e)}},{name:"Expected SARSA",func:()=>{let t,e;x=0,w=0,t=f||l.getRandomStartState(),e=l.getEpsilonGreedyAction(t,At),k(t,e)}},{name:"Dyna-Q",func:()=>{let t;x=0,w=0,t=f||l.getRandomStartState(),T(t)}},{name:"Monte Carlo",func:()=>{let t;x=0,w=0,_=[],t=l.getRandomStartState(),z(t)}}],P=()=>{a=setTimeout((()=>{v<g&&(n(11,v++,v),I.forEach((t=>{o==t.name&&t.func()})))}),0)};return t.$$set=t=>{"blocked"in t&&n(0,i=t.blocked),"terminal"in t&&n(1,c=t.terminal),"rewards"in t&&n(2,u=t.rewards),"defaultReward"in t&&n(3,d=t.defaultReward),"startState"in t&&n(16,f=t.startState),"numEpisodes"in t&&n(17,g=t.numEpisodes),"planningSteps"in t&&n(18,m=t.planningSteps),"numX"in t&&n(4,p=t.numX),"numY"in t&&n(5,h=t.numY)},[i,c,u,d,p,h,l,r,$,y,o,v,I,P,()=>{a&&clearTimeout(a),s&&clearTimeout(s)},()=>{n(11,v=0),n(8,$=[]),n(9,y=[]),l.initQValues(),r.clearPlot()},f,g,m,function(t){Q[t?"unshift":"push"]((()=>{r=t,n(7,r)}))},function(t){y=t,n(9,y)},function(t){$=t,n(8,$)},function(){o=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(10,o),n(12,I)},function(t){Q[t?"unshift":"push"]((()=>{l=t,n(6,l)}))}]}class Qt extends U{constructor(t){super(),K(this,t,Et,St,s,{blocked:0,terminal:1,rewards:2,defaultReward:3,startState:16,numEpisodes:17,planningSteps:18,numX:4,numY:5},[-1,-1])}}const Vt=document.getElementById("maze-shell-0"),Tt=document.getElementById("maze-shell-1"),_t=document.getElementById("maze-shell-2"),zt=document.getElementById("maze-shell-3"),It=document.getElementById("maze-shell-4"),Pt=Vt?new Qt({target:Vt,props:{numX:12,numY:3,planningSteps:10,blocked:Array(),terminal:Array([1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[7,2],[8,2],[9,2],[10,2],[11,2]),rewards:Array([1,2,-10],[2,2,-10],[3,2,-10],[4,2,-10],[5,2,-10],[6,2,-10],[7,2,-10],[8,2,-10],[9,2,-10],[10,2,-10],[11,2,0]),defaultReward:-.1,startState:[0,2]}}):null,Yt=Tt?new Qt({target:Tt,props:{numX:7,numY:3,planningSteps:10,blocked:Array(),terminal:Array([1,2],[2,2],[3,2],[4,2],[5,2],[6,2]),rewards:Array([1,2,-10],[2,2,-10],[3,2,-10],[4,2,-10],[5,2,-10],[6,2,0]),defaultReward:-.1,startState:[0,2]}}):null,Mt=_t?new Qt({target:_t,props:{numX:5,numY:5,blocked:Array(),terminal:Array([1,1]),rewards:Array([1,1,1]),defaultReward:-.1}}):null,Bt=zt?new Qt({target:zt,props:{numX:5,numY:5,blocked:Array(),terminal:Array([1,1]),rewards:Array([1,1,1],[3,3,1]),defaultReward:-.1}}):null,Lt=It?new Qt({target:It,props:{numX:6,numY:4,blocked:Array([0,0],[3,2],[4,1],[3,3]),terminal:Array([1,1]),rewards:Array([1,1,1]),defaultReward:-.1}}):null;return t.comp0=Pt,t.comp1=Yt,t.comp2=Mt,t.comp3=Bt,t.comp4=Lt,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=bundle.js.map
